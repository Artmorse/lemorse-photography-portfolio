{{ define "main" }}

{{ $allPhotos := where .Site.RegularPages "Section" "photos" }}
{{ $matchingPhotos := where $allPhotos "Params.species_id" "eq" .Params.id }}
{{ $sortedMatchingPhotos := sort $matchingPhotos "Params.date" "asc" }}

    <article>
        <h1>{{ .Params.french_name }}</h1>
        <h3>{{ .Params.scientific_name }}</h3>

        <div id="my-justified-gallery">
            {{ range $photo := $sortedMatchingPhotos }}
                {{ partial "imagecontainer.html" (dict
                    "filename" $photo.Params.signed_filename
                    "alt"  $photo.Params.french_name
                ) }}
            {{ end }}
        </div>
    </article>
{{ end }}